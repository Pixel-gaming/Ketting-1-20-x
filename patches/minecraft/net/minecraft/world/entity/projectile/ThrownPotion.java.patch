--- a/net/minecraft/world/entity/projectile/ThrownPotion.java
+++ b/net/minecraft/world/entity/projectile/ThrownPotion.java
@@ -88,11 +_,11 @@
          boolean flag = potion == Potions.f_43599_ && list.isEmpty();
          if (flag) {
             this.m_37552_();
-         } else if (!list.isEmpty()) {
+         } else if (true || !list.isEmpty()) { // CraftBukkit - Call event even if no effects to apply
             if (this.m_37553_()) {
-               this.m_37537_(itemstack, potion);
+               this.makeAreaOfEffectCloud(itemstack, potion, p_37543_); // CraftBukkit - Pass HitResult
             } else {
-               this.m_37547_(list, p_37543_.m_6662_() == HitResult.Type.ENTITY ? ((EntityHitResult)p_37543_).m_82443_() : null);
+               this.applySplash(list, p_37543_.m_6662_() == HitResult.Type.ENTITY ? ((EntityHitResult) p_37543_).m_82443_() : null, p_37543_); // CraftBukkit - Pass HitResult
             }
          }
 
@@ -124,45 +_,72 @@
 
    }
 
-   private void m_37547_(List<MobEffectInstance> p_37548_, @Nullable Entity p_37549_) {
+   private void applySplash(List<MobEffectInstance> p_37548_, @Nullable Entity p_37549_, HitResult position) { // CraftBukkit - Pass MovingObjectPosition
       AABB aabb = this.m_20191_().m_82377_(4.0D, 2.0D, 4.0D);
       List<LivingEntity> list = this.m_9236_().m_45976_(LivingEntity.class, aabb);
+      java.util.Map<org.bukkit.entity.LivingEntity, Double> affected = new java.util.HashMap<org.bukkit.entity.LivingEntity, Double>(); // CraftBukkit
       if (!list.isEmpty()) {
          Entity entity = this.m_150173_();
 
-         for(LivingEntity livingentity : list) {
+         for (LivingEntity livingentity : list) {
             if (livingentity.m_5801_()) {
                double d0 = this.m_20280_(livingentity);
                if (d0 < 16.0D) {
-                  double d1;
+                  double d1 = 1.0D - Math.sqrt(d0) / 4.0D;
                   if (livingentity == p_37549_) {
                      d1 = 1.0D;
-                  } else {
-                     d1 = 1.0D - Math.sqrt(d0) / 4.0D;
-                  }
-
-                  for(MobEffectInstance mobeffectinstance : p_37548_) {
-                     MobEffect mobeffect = mobeffectinstance.m_19544_();
-                     if (mobeffect.m_8093_()) {
-                        mobeffect.m_19461_(this, this.m_19749_(), livingentity, mobeffectinstance.m_19564_(), d1);
-                     } else {
-                        int i = mobeffectinstance.m_267696_((p_267930_) -> {
-                           return (int)(d1 * (double)p_267930_ + 0.5D);
-                        });
-                        MobEffectInstance mobeffectinstance1 = new MobEffectInstance(mobeffect, i, mobeffectinstance.m_19564_(), mobeffectinstance.m_19571_(), mobeffectinstance.m_19572_());
-                        if (!mobeffectinstance1.m_267633_(20)) {
-                           livingentity.m_147207_(mobeffectinstance1, entity);
-                        }
-                     }
-                  }
-               }
-            }
-         }
-      }
-
+                  }
+
+                  // CraftBukkit start
+                  affected.put((org.bukkit.entity.LivingEntity) livingentity.getBukkitEntity(), d1);
+               }
+            }
+         }
+      }
+
+
+      org.bukkit.event.entity.PotionSplashEvent event = org.bukkit.craftbukkit.event.CraftEventFactory.callPotionSplashEvent(this, affected);
+      if (!event.isCancelled() && p_37548_ != null && !p_37548_.isEmpty()) { // do not process effects if there are no effects to process
+         Entity entity1 = this.m_150173_();
+         for (org.bukkit.entity.LivingEntity victim : event.getAffectedEntities()) {
+            if (!(victim instanceof org.bukkit.craftbukkit.entity.CraftLivingEntity)) {
+               continue;
+            }
+
+            LivingEntity livingentity = ((org.bukkit.craftbukkit.entity.CraftLivingEntity) victim).getHandle();
+            double intensity = event.getIntensity(victim);
+            // CraftBukkit end
+
+            for (MobEffectInstance effectinstance : p_37548_) {
+               MobEffect mobeffectlist = effectinstance.m_19544_();
+               // CraftBukkit start - Abide by PVP settings - for players only!
+               if (!this.m_9236_().pvpMode && this.m_19749_() instanceof net.minecraft.server.level.ServerPlayer && livingentity instanceof net.minecraft.server.level.ServerPlayer && livingentity != this.m_19749_()) {
+                  if (mobeffectlist == net.minecraft.world.effect.MobEffects.f_19597_ || mobeffectlist == net.minecraft.world.effect.MobEffects.f_19599_ || mobeffectlist == net.minecraft.world.effect.MobEffects.f_19602_ || mobeffectlist == net.minecraft.world.effect.MobEffects.f_19610_
+                          || mobeffectlist == net.minecraft.world.effect.MobEffects.f_19612_ || mobeffectlist == net.minecraft.world.effect.MobEffects.f_19613_ || mobeffectlist == net.minecraft.world.effect.MobEffects.f_19614_) {
+                     continue;
+                  }
+               }
+               // CraftBukkit end
+
+               if (mobeffectlist.m_8093_()) {
+                  mobeffectlist.m_19461_(this, this.m_19749_(), livingentity, effectinstance.m_19564_(), intensity);
+               } else {
+                  int i = effectinstance.m_267696_((j) -> {
+                     return (int) (intensity * (double) j + 0.5D);
+                  });
+                  MobEffectInstance mobeffect1 = new MobEffectInstance(mobeffectlist, i, effectinstance.m_19564_(), effectinstance.m_19571_(), effectinstance.m_19572_());
+
+                  if (!mobeffect1.m_267633_(20)) {
+                     livingentity.addEffect(mobeffect1, entity1, org.bukkit.event.entity.EntityPotionEffectEvent.Cause.POTION_SPLASH); // CraftBukkit
+                  }
+               }
+            }
+         }
+      }
    }
 
-   private void m_37537_(ItemStack p_37538_, Potion p_37539_) {
+
+   private void makeAreaOfEffectCloud(ItemStack p_37538_, Potion p_37539_, HitResult position) { // CraftBukkit - Pass MovingObjectPosition
       AreaEffectCloud areaeffectcloud = new AreaEffectCloud(this.m_9236_(), this.m_20185_(), this.m_20186_(), this.m_20189_());
       Entity entity = this.m_19749_();
       if (entity instanceof LivingEntity) {
@@ -184,7 +_,14 @@
          areaeffectcloud.m_19714_(compoundtag.m_128451_("CustomPotionColor"));
       }
 
-      this.m_9236_().m_7967_(areaeffectcloud);
+      // CraftBukkit start
+      org.bukkit.event.entity.LingeringPotionSplashEvent event = org.bukkit.craftbukkit.event.CraftEventFactory.callLingeringPotionSplashEvent(this, areaeffectcloud);
+      if (!(event.isCancelled() || areaeffectcloud.m_213877_())) {
+         this.m_9236_().m_7967_(areaeffectcloud);
+      } else {
+         areaeffectcloud.m_146870_();
+      }
+      // CraftBukkit end
    }
 
    private boolean m_37553_() {
@@ -194,13 +_,25 @@
    private void m_150192_(BlockPos p_150193_) {
       BlockState blockstate = this.m_9236_().m_8055_(p_150193_);
       if (blockstate.m_204336_(BlockTags.f_13076_)) {
-         this.m_9236_().m_7471_(p_150193_, false);
+         // CraftBukkit start
+         if (org.bukkit.craftbukkit.event.CraftEventFactory.callEntityChangeBlockEvent(this, p_150193_, net.minecraft.world.level.block.Blocks.f_50016_.m_49966_())) {
+            this.m_9236_().m_7471_(p_150193_, false);
+         }
+         // CraftBukkit end
       } else if (AbstractCandleBlock.m_151933_(blockstate)) {
-         AbstractCandleBlock.m_151899_((Player)null, blockstate, this.m_9236_(), p_150193_);
+         // CraftBukkit start
+         if (org.bukkit.craftbukkit.event.CraftEventFactory.callEntityChangeBlockEvent(this, p_150193_, blockstate.m_61124_(AbstractCandleBlock.f_151895_, false))) {
+            AbstractCandleBlock.m_151899_((Player) null, blockstate, this.m_9236_(), p_150193_);
+         }
+         // CraftBukkit end
       } else if (CampfireBlock.m_51319_(blockstate)) {
-         this.m_9236_().m_5898_((Player)null, 1009, p_150193_, 0);
-         CampfireBlock.m_152749_(this.m_19749_(), this.m_9236_(), p_150193_, blockstate);
-         this.m_9236_().m_46597_(p_150193_, blockstate.m_61124_(CampfireBlock.f_51227_, Boolean.valueOf(false)));
+         // CraftBukkit start
+         if (org.bukkit.craftbukkit.event.CraftEventFactory.callEntityChangeBlockEvent(this, p_150193_, blockstate.m_61124_(CampfireBlock.f_51227_, false))) {
+            this.m_9236_().m_5898_((Player) null, 1009, p_150193_, 0);
+            CampfireBlock.m_152749_(this.m_19749_(), this.m_9236_(), p_150193_, blockstate);
+            this.m_9236_().m_46597_(p_150193_, (BlockState) blockstate.m_61124_(CampfireBlock.f_51227_, false));
+         }
+         // CraftBukkit end
       }
 
    }
